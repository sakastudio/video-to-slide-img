# Requirements Document

## Introduction
本ドキュメントは、ローカル環境で完結する公演動画からスライド画像抽出Webアプリケーションの要件を定義する。Vite + Reactで構築し、ファイルアップロードを行わず、ブラウザ内で全ての処理を完結させる。フレーム間差分検出によりスライド切り替えを判定し、各スライドを画像として出力する。

## Requirements

### Requirement 1: 動画ファイル読み込み
**Objective:** ユーザーとして、ローカルの動画ファイルをブラウザで読み込みたい。サーバーへのアップロードなしに動画を処理できるようにするため。

#### Acceptance Criteria
1. When ユーザーが動画ファイルを選択した時, the アプリケーション shall ブラウザ内で動画を読み込み、プレビュー表示する
2. The アプリケーション shall サーバーへのファイルアップロードを行わず、全ての処理をクライアントサイドで完結させる
3. If サポートされていない動画形式が選択された場合, then the アプリケーション shall エラーメッセージを表示する
4. The アプリケーション shall MP4、WebM、OGG形式の動画ファイルをサポートする

### Requirement 2: スライド切り替え検出
**Objective:** ユーザーとして、動画内のスライド切り替えを自動検出したい。手動でスライドを特定する手間を省くため。

#### Acceptance Criteria
1. When 抽出処理が開始された時, the アプリケーション shall 指定された判定頻度でフレームをサンプリングする
2. When 連続するフレーム間の差分が閾値を超えた時, the アプリケーション shall スライド切り替えとして検出する
3. The アプリケーション shall デフォルトの判定頻度を1秒間隔とする
4. The アプリケーション shall フレーム差分の比較にピクセル単位の差分計算を使用する

### Requirement 3: パラメータ設定
**Objective:** ユーザーとして、検出パラメータをカスタマイズしたい。動画の特性に応じて最適な検出精度を得るため。

#### Acceptance Criteria
1. When ユーザーが判定頻度を変更した時, the アプリケーション shall 指定された間隔でフレームをサンプリングする
2. When ユーザーが判定閾値を変更した時, the アプリケーション shall 指定された閾値でスライド切り替えを判定する
3. The アプリケーション shall 判定頻度の入力フィールドを提供し、秒単位で指定可能とする
4. The アプリケーション shall 判定閾値の入力フィールドを提供し、パーセンテージまたは数値で指定可能とする
5. The アプリケーション shall パラメータのデフォルト値を表示する

### Requirement 4: スライド画像出力
**Objective:** ユーザーとして、検出されたスライドを画像としてダウンロードしたい。プレゼンテーション資料として再利用するため。

#### Acceptance Criteria
1. When スライド検出が完了した時, the アプリケーション shall 検出された全スライドをサムネイル一覧で表示する
2. When ユーザーが個別ダウンロードボタンをクリックした時, the アプリケーション shall 該当スライドをPNG画像としてダウンロードする
3. When ユーザーが一括ダウンロードボタンをクリックした時, the アプリケーション shall 全スライドをZIPファイルとしてダウンロードする
4. The アプリケーション shall 各スライド画像にシーケンス番号を付与する

### Requirement 5: 処理状態表示
**Objective:** ユーザーとして、抽出処理の進捗を確認したい。処理完了までの見通しを把握するため。

#### Acceptance Criteria
1. While 抽出処理が実行中の間, the アプリケーション shall 進捗バーを表示する
2. While 抽出処理が実行中の間, the アプリケーション shall 現在処理中のフレーム位置を表示する
3. When 抽出処理が完了した時, the アプリケーション shall 検出されたスライド数を表示する
4. If 抽出処理中にエラーが発生した場合, then the アプリケーション shall エラー内容を表示し、処理を中断する

### Requirement 6: ユーザーインターフェース
**Objective:** ユーザーとして、直感的に操作できるUIを使用したい。技術的な知識がなくても利用できるようにするため。

#### Acceptance Criteria
1. The アプリケーション shall シングルページアプリケーションとして動作する
2. The アプリケーション shall レスポンシブデザインを採用し、デスクトップブラウザで適切に表示する
3. The アプリケーション shall 操作手順をUIに明示する
4. When ユーザーが処理をキャンセルした時, the アプリケーション shall 実行中の処理を中断し、初期状態に戻る
